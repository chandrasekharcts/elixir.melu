{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Elixir Web | Updates Repository</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="{% static 'images/favicon.png'  %}" type="image/png">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}" media="screen"/>

</head>
<body>
<div class="main-container">
    <nav class="navbar navbar-expand justify-content-between fixed-top">
        <a class="navbar-brand mb-0 h1 d-none d-md-block" href="/dashboard/">
            <img src="{% static 'images/logo.png' %}" class="navbar-brand-image d-inline-block align-top mr-2" alt="">
            <small>Elixir <small>v3.0.1</small></small>
        </a>

        <a class="navbar-brand mb-0 h1 d-none d-md-block">
            <img src="{% static 'images/newcts.png' %}" class="pb-2">
        </a>

        <div class="d-flex flex-1 d-block d-md-none">
            <a href="#" class="sidebar-toggle ml-3">
                <i data-feather="menu"></i>
            </a>
        </div>

        <ul class="navbar-nav d-flex justify-content-end mr-2">
            <li class="sidebar-nav-item mt-1">
                <a class="sidebar-nav-link">
                  <span class="sidebar-nav-name">
                    <b style="font-family: Arial Rounded MT">{{ user.first_name }} {{ user.last_name }}</b>
                  </span>
                </a>
            </li>

            <li class="nav-item dropdown">
                <a class="nav-link avatar-with-name" id="navbarDropdownMenuLink" data-toggle="dropdown" href="#">
                    <img src="{% static 'images/user_icon.png' %}" class="d-inline-block align-top" alt="">
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                    {% if user.email != 'agent' %}
                    <a class="dropdown-item text-danger" href="/version_history/">Version History</a>
                    {% endif %}
                    <a class="dropdown-item text-danger" href="/account/logout/">Logout</a>
                </div>
            </li>
        </ul>
    </nav>

    <!-- expand-hover push -->
    <!-- Sidebar -->
    <div class="main-sidebar expand-hover push">
        <ul class="sidebar-nav">

            <!-- Dashboard -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="home"></i>
              </span>
                    <span class="sidebar-nav-name">
                Dashboard
              </span>
                    <span class="sidebar-nav-end">
              </span>
                </a>
            </li>

            <!-- Reporting -->
            {% if user.email != 'agent' %}
            <li class="sidebar-nav-item">
                <a href="/dashboard/reporting/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="airplay"></i>
              </span>
                    <span class="sidebar-nav-name">
                Reporting
              </span>
                    <span class="sidebar-nav-end">
              </span>
                </a>
            </li>
            {% endif %}

            <!-- My Task -->
            {% if user.email == 'agent' or user.email == 'superuser' %}
            <li class="sidebar-nav-item">
                <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#mytask" aria-expanded="false"
                   aria-controls="example">
                    <span class="sidebar-nav-icon">
                        <i data-feather="grid"></i>
                    </span>
                    <span class="sidebar-nav-name">
                        My Tasks
                    </span>
                    <span class="sidebar-nav-end">
                            <i data-feather="chevrons-right" class="nav-collapse-icon"></i>
                    </span>
                </a>

                <ul class="sidebar-sub-nav collapse" id="mytask">
                    <li class="sidebar-nav-item">
                        <a href="/dashboard/mytasks_up_kc/" class="sidebar-nav-link">
                            <span class="sidebar-nav-icon">
                                <i data-feather="server"></i>
                                <i data-feather="clipboard"></i>
                            </span>
                            <span class="sidebar-nav-name">
                            Update + Knowledge Test
                            </span>
                        </a>
                    </li>
                    <li class="sidebar-nav-item">
                        <a href="/dashboard/mytasks_kc/" class="sidebar-nav-link">
                            <span class="sidebar-nav-icon">
                                <i data-feather="clipboard"></i>
                            </span>
                            <span class="sidebar-nav-name">
                                Knowledge Test
                            </span>
                        </a>
                    </li>
                </ul>
            </li>
            {% endif %}

            <!-- Knowledge Test Evaluation -->
            {% if user.email == 'poc' or user.email == 'superuser' %}
            <li class="sidebar-nav-item">
                <a href="/dashboard/knowledge-check-evaluation/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="file-text"></i>
              </span>
                    <span class="sidebar-nav-name">
                Knowledge Test Evaluation
              </span>
                    <span class="sidebar-nav-end">
              </span>
                </a>
            </li>
            {% endif %}

            <!-- Divider Start -->
            <li class="sidebar-nav-item">
                <div class="dropdown-divider ml-5 mr-5 mt-2 mb-2"></div>
            </li>
            <!-- Divider End -->

            <!-- Updates Repository -->
            {% if user.email != 'agent' %}
            <li class="sidebar-nav-item">
                <a href="/dashboard/elixir/" class="sidebar-nav-link active">
              <span class="sidebar-nav-icon">
                <i data-feather="server"></i>
              </span>
                    <span class="sidebar-nav-name">
                Updates Repository
              </span>
                    <span class="sidebar-nav-end">
              </span>
                </a>
            </li>
            {% endif %}

            {% if user.email == 'poc' or user.email == 'superuser' %}
            <!-- Create New Update -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/create-new-update/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="edit"></i>
              </span>
                    <span class="sidebar-nav-name">
                Create new Update
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- All Update -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/all-update/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="align-justify"></i>
              </span>
                    <span class="sidebar-nav-name">
                All Update
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Sent Update -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/sent-update/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="chevrons-up"></i>
              </span>
                    <span class="sidebar-nav-name">
                Sent Update
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Pending Update -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/pending-update/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="alert-circle"></i>
              </span>
                    <span class="sidebar-nav-name">
                Pending Update
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Acknowledged Update -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/acknowledged-update/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="check-circle"></i>
              </span>
                    <span class="sidebar-nav-name">
                Acknowledged Update
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Divider Start-->
            <li class="sidebar-nav-item">
                <div class="dropdown-divider ml-5 mr-5 mt-2 mb-2"></div>
            </li>
            <!-- Divider End-->
            {% endif %}


            {% if user.email != 'agent' %}
            <!-- Knowledge Test Repository -->
            <li class="sidebar-nav-item">

                <a href="/dashboard/conquest/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="clipboard"></i>
              </span>
                    <span class="sidebar-nav-name">
                Knowledge Test Repository
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Question Bank -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/question_bank/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="briefcase"></i>
              </span>
                    <span class="sidebar-nav-name">
                Question Bank
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>
            {% endif %}

            {% if user.email == 'poc' or user.email == 'superuser' %}
            <!-- Knowledge Test Result -->
            <li class="sidebar-nav-item">

                <a href="/dashboard/conquest_response/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="book"></i>
              </span>
                    <span class="sidebar-nav-name">
                Knowledge Test Result
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Create Knowledge Test -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/create-knowledge-check/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="file-plus"></i>
              </span>
                    <span class="sidebar-nav-name">
                Create Knowledge Test
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Create a Question -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/create-a-question/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="edit-3"></i>
              </span>
                    <span class="sidebar-nav-name">
                Create a Question
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- All Knowledge Test -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/all-knowledge-check/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="copy"></i>
              </span>
                    <span class="sidebar-nav-name">
                        All Knowledge Test <br><span style="font-size : 10px"> ( w/o update ) </span>
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Sent Knowledge Test-->
            <li class="sidebar-nav-item">
                <a href="/dashboard/sent-knowledge-check/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="arrow-up-right"></i>
              </span>
                    <span class="sidebar-nav-name">
                Sent Knowledge Test <br><span style="font-size : 10px"> ( w/o update ) </span>
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Pending Knowledge Test -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/pending-knowledge-check/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="alert-triangle"></i>
              </span>
                    <span class="sidebar-nav-name">
                Pending Knowledge Test <br><span style="font-size : 10px"> ( w/o update ) </span>
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Completed Knowledge Test -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/completed-knowledge-check/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="check-square"></i>
              </span>
                    <span class="sidebar-nav-name">
                Completed Knowledge Test <br><span style="font-size : 10px"> ( w/o update ) </span>
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Divider Start-->
            <li class="sidebar-nav-item">
                <div class="dropdown-divider ml-5 mr-5 mt-2 mb-2"></div>
            </li>
            <!-- Divider End-->
            {% endif %}

            {% if user.email == 'poc' or user.email == 'superuser' %}
            <!-- Update Source -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/update_source_type/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="cpu"></i>
              </span>
                    <span class="sidebar-nav-name">
                Update Source
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Update Type -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/update_type/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="maximize-2"></i>
              </span>
                    <span class="sidebar-nav-name">
                Update Type
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Users -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/users/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="user"></i>
              </span>
                    <span class="sidebar-nav-name">
                Users
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Sub Process -->
            <li class="sidebar-nav-item">
                <a href="/dashboard/sub_process/" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="users"></i>
              </span>
                    <span class="sidebar-nav-name">
                Sub Process
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Divider Start-->
            <li class="sidebar-nav-item">
                <div class="dropdown-divider ml-5 mr-5 mt-2 mb-2"></div>
            </li>


            <!-- Divider End-->
            {% endif %}

            {% if user.email == 'superuser' %}
            <!-- Add Accounts -->
            <li class="sidebar-nav-item">
                <a href="{% url 'listAccount' %}" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="package"></i>
              </span>
                    <span class="sidebar-nav-name">
                Add Accounts
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Add Projects -->
            <li class="sidebar-nav-item">
                <a href="{% url 'listProject' %}" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="layers"></i>
              </span>
                    <span class="sidebar-nav-name">
                Add Projects
              </span>
                    <span class="sidebar-nav-end"></span>
                </a>
            </li>

            <!-- Create Admin -->
            <li class="sidebar-nav-item">
                <a href="{% url 'listAdmin' %}" class="sidebar-nav-link">
              <span class="sidebar-nav-icon">
                <i data-feather="award"></i>
              </span>
                    <span class="sidebar-nav-name">
                Create Admin
              </span>
                    <span class="sidebar-nav-end">
              </span>
                </a>
            </li>

            <!-- Divider Start-->
            <li class="sidebar-nav-item">
                <div class="dropdown-divider ml-5 mr-5 mt-2 mb-5"></div>
            </li>
            <!-- Divider End-->
            {% endif %}

        </ul>
    </div>
    <!-- Sidebar End -->

    <!-- Main-content-aside -->
    <div class="main-content">

        <div class="main-main-content">

            <div id="loading">
                <img src="{% static 'images/4105180.gif' %}" class="ajax-loader"/>
            </div>

            <div class="container-fluid">

                {% if user.email != 'agent' %}

                <div class="row">
                    <div class="col">
                        <div class="card mb-grid text-center">
                            <div class="card-header">
                                <ul class="nav nav-tabs card-header-tabs" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active pb-3" id="card-tab-1" data-toggle="tab"
                                           href="#card-tab-content-1" role="tab" aria-controls="card-tab-content-1"
                                           aria-selected="true" style="font-size:11px; font-weight:600">Updates</a>
                                    </li>

                                    <li class="nav-item">
                                        <a class="nav-link pb-3" id="card-tab-2" data-toggle="tab"
                                           href="#card-tab-content-2"
                                           role="tab" aria-controls="card-tab-2" aria-selected="false"
                                           style="font-size:11px; font-weight:600">POCs</a>
                                    </li>
                                </ul>

                            </div>

                            <div class="card-body">

                                <div class="tab-content">

                                    <div class="tab-pane fade show active" id="card-tab-content-1" role="tabpanel"
                                         aria-labelledby="card-tab-1" align="left">

                                        <div class="tab-pane fade show active p-1" align="right">

                                            <button data-toggle="modal"
                                                    data-target="#up_filtration"
                                                    class="btn btn-sm btn-labeled btn-primary">
                                                        <span class="btn-label">
                                                            <span class="oi oi-sort-descending"
                                                                  aria-hidden="true"></span>
                                                        </span>
                                                <span class="btn-text">Filter By</span>
                                            </button>


                                            {% if user.email == 'poc' or user.email == 'superuser' %}

                                            <button data-toggle="modal"
                                                    data-target="#up_val_change"
                                                    class="btn btn-sm btn-labeled btn-danger">
                                                        <span class="btn-label">
                                                            <span class="oi oi-calendar" aria-hidden="true"></span>
                                                        </span>
                                                <span class="btn-text">Change Validity</span>
                                            </button>

                                            {% endif %}

                                        </div>

                                        <div class="card mb-grid">
                                            <div class="table-responsive-md" id="elixir_table_1_div">
                                                <table class="table table-actions table-striped table-hover mb-0"
                                                       data-table id="elixir_table_1">
                                                    <thead>
                                                    <tr>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Selection
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Timestamp
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Id
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Title
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Message
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Update_Source
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Update_Type
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Sub_Process
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Sender
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Deadline
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Completion_Rate
                                                        </th>
                                                        <th scope="col"
                                                            class="sorting_desc_disabled sorting_asc_disabled"
                                                            style="font-size:11px; font-weight:600"></th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="elixir_table_1_body">
                                                    {% for upd in update_details %}
                                                    <tr>
                                                        <td><label class="switch">
                                                            <input type="checkbox">
                                                            <span class="slider round"></span>
                                                        </label></td>
                                                        <td>{{upd.timestamp}}</td>
                                                        <td>{{upd.id}}</td>
                                                        <td>{{upd.title}}</td>
                                                        <td>{{upd.update_message}}</td>
                                                        <td>{{upd.update_source}}</td>
                                                        <td>{{upd.update_type}}</td>
                                                        <td>{{upd.sub_process}}</td>
                                                        <td>{{upd.sender}}</td>
                                                        <td>{{upd.deadline}}</td>
                                                        <td>{{upd.completion_rate}}%</td>
                                                        <td>
                                                            <button type="button" data-toggle="modal"
                                                                    data-target="#update_details"
                                                                    class="btn btn-sm btn-info"
                                                                    onclick="modal_open({{upd.id}})">
                                                                Details
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="tab-pane fade" id="card-tab-content-2" role="tabpanel"
                                         aria-labelledby="card-tab-2" align="left">
                                        <div class="card mb-grid">
                                            <div class="table-responsive-md">
                                                <table class="table table-actions table-striped table-hover mb-0"
                                                       id="elixir_table_2"
                                                       data-table>
                                                    <thead>
                                                    <tr>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            LDAP
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Total
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Pending
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Completed
                                                        </th>
                                                        <th scope="col" style="font-size:11px; font-weight:600">
                                                            Completion_Rate
                                                        </th>
                                                        <th scope="col"
                                                            class="sorting_desc_disabled sorting_asc_disabled"
                                                            style="font-size:11px; font-weight:600"></th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    {% for snd in sender_details %}
                                                    <tr>
                                                        <td id="sender_email">{{snd.sender}}</td>
                                                        <td>{{snd.total_updates}}</td>
                                                        <td>{{snd.pending_updates}}</td>
                                                        <td>{{snd.completed_updates}}</td>
                                                        <td>{{snd.completion_rate}}%</td>
                                                        <td>
                                                            <button type="button" data-toggle="modal"
                                                                    data-target="#up_sender_details"
                                                                    class="btn btn-sm btn-info"
                                                                    onclick="modal_poc_open(this.parentElement.parentElement)">
                                                                Details
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal: modalCart -->
                <div class="modal fade" id="update_details" tabindex="-1" role="dialog"
                     aria-labelledby="exampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-xl" style="max-width: 900px" role="document">
                        <div class="modal-content">
                            <!--Header-->
                            <div class="modal-header">

                                <div class="row ml-1 mr-1 pr-2 pb-2"
                                     style="background-color: rgba(232, 234, 246 ,0.25); border-radius: .25rem">

                                    <div class="col-md-12">
                                        <div class="row" align="right">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">×</span>
                                            </button>
                                        </div>

                                        <div>
                                            <h6 class="card-title mb-0"
                                                style="font-size: 11px; font-weight: 600; color: #424242">
                                                Title</h6>
                                            <h3 id="updateTitle"
                                                style="font-size: 15px; font-weight: 600; color: #000000"></h3>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <h6 class="card-title mb-0"
                                            style="font-size: 11px; font-weight: 600; color: #4E342E">
                                            Sent On</h6>
                                        <h3 id="updateTimestamp"
                                            style="font-size: 15px; font-weight: 600; color: #3E2723"></h3>
                                    </div>

                                    <div class="col-md-3 pr-5">
                                        <h3 class="card-title mb-0" id="t_users"
                                            style="font-size: 20px; font-weight: 600; color: #009688"></h3>
                                        <h6 style="font-size: 11px; font-weight: 600; color: #009688">
                                            Total Recipients</h6>
                                    </div>

                                    <div class="col-md-3 pr-5">
                                        <h3 class="card-title mb-0" id="p_users"
                                            style="font-size: 20px; font-weight: 600; color: #b71c1c"></h3>
                                        <h6 style="font-size: 11px; font-weight: 600; color: #b71c1c">
                                            Pending Recipients</h6>
                                    </div>

                                    <div class="col-md-3 pr-5">
                                        <h3 class="card-title mb-0" id="ack_users"
                                            style="font-size: 20px; font-weight: 600; color: #1B5E20"></h3>
                                        <h6 style="font-size: 11px; font-weight: 600; color: #1B5E20">
                                            Acknowledged Recipients</h6>
                                    </div>

                                    <div class="col-md-3 pr-5">
                                        <h3 class="card-title mb-0" id="updateCompletionRate"
                                            style="font-size: 20px; font-weight: 600; color: #1A237E"></h3>
                                        <h6 style="font-size: 11px; font-weight: 600; color: #1A237E">
                                            Completion Percentage</h6>
                                    </div>

                                </div>

                            </div>
                            <!--Body-->
                            <div class="modal-body" id="elixir_table1_details_div">
                                <span>Recipients List</span>

                                <table class="table table-actions table-striped table-hover mb-0"
                                       id="elixir_table1_details"
                                       data-table>
                                    <thead>
                                    <tr>
                                        <th style="font-size:11px; font-weight:600">#</th>
                                        <th style="font-size:11px; font-weight:600">Users</th>
                                        <th style="font-size:11px; font-weight:600">Acknowledgement</th>
                                    </tr>
                                    </thead>
                                    <tbody id="modal_users_table">
                                    </tbody>
                                </table>

                            </div>
                            <!--Footer-->
                            <div class="modal-footer">
                                <label style="font-size:10px; font-weight:600"> Elixir v3.0.1</label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal: modalCart -->

                <!-- Modal: modalCart -->
                <div class="modal fade" id="up_sender_details" tabindex="-1" role="dialog"
                     aria-labelledby="exampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-xl" style="max-width: 900px" role="document">
                        <div class="modal-content">
                            <!--Header-->
                            <div class="modal-header">

                                <div class="row ml-1 mr-1 pl-2 pr-3 pb-2"
                                     style="background-color: rgba(232, 234, 246 ,0.25); border-radius: .25rem; width : 100%"
                                     align="left">

                                    <div class="col-lg-12 mb-3">
                                        <div class="row mt-1" align="right">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true" content="right">×</span>
                                            </button>
                                        </div>

                                        <div>
                                            <h6 class="card-title mb-0"
                                                style="font-size: 11px; font-weight: 600; color: #424242">
                                                POC</h6>
                                            <h3 id="user_email"
                                                style="font-size: 15px; font-weight: 600; color: #000000"></h3>
                                        </div>
                                    </div>

                                    <div class="col-lg-4 pr-5">
                                        <h3 class="card-title mb-0" id="c_rate"
                                            style="font-size: 20px; font-weight: 600; color: #009688"></h3>
                                        <h6 style="font-size: 11px; font-weight: 600; color: #009688">
                                            Completion Rate</h6>
                                    </div>

                                    <div class="col-lg-4 pr-5">
                                        <h3 class="card-title mb-0" id="pend_count"
                                            style="font-size: 20px; font-weight: 600; color: #b71c1c"></h3>
                                        <h6 style="font-size: 11px; font-weight: 600; color: #b71c1c">
                                            Pending Updates</h6>
                                    </div>

                                    <div class="col-lg-4 pr-5">
                                        <h3 class="card-title mb-0" id="ack_count"
                                            style="font-size: 20px; font-weight: 600; color: #1B5E20"></h3>
                                        <h6 style="font-size: 11px; font-weight: 600; color: #1B5E20">
                                            Acknowledged Updates</h6>
                                    </div>

                                </div>

                            </div>
                            <!--Body-->
                            <div class="modal-body" id="elixir_table2_details_div">
                                <span>Updates List</span>

                                <table class="table table-actions table-striped table-hover mb-0"
                                       id="elixir_table2_details"
                                       data-table>
                                    <thead>
                                    <tr>
                                        <th style="font-size:11px; font-weight:600">#</th>
                                        <th style="font-size:11px; font-weight:600">Id</th>
                                        <th style="font-size:11px; font-weight:600">Update</th>
                                        <th style="font-size:11px; font-weight:600">Completion_Rate</th>
                                    </tr>
                                    </thead>
                                    <tbody id="modal_poc_table">
                                    </tbody>
                                </table>
                            </div>
                            <!--Footer-->
                            <div class="modal-footer">
                                <label style="font-size:10px; font-weight:600"> Elixir v3.0.1</label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal: modalCart -->

                <!-- Modal: modalCart -->
                <div class="modal fade" id="up_filtration" tabindex="-1" role="dialog"
                     aria-labelledby="exampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-xl" style="max-width: 900px" role="document">
                        <div class="modal-content">
                            <!--Header-->
                            <div class="modal-header">
                                <div class="row ml-1 mr-1 pl-2 pr-3 pb-2"
                                     style="background-color: rgba(232, 234, 246 ,0.25); border-radius: .25rem; width : 100%"
                                     align="left">
                                    <div class="col-lg-12 mb-3">
                                        <div class="row mt-1" align="right">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true" content="right">×</span>
                                            </button>
                                        </div>

                                        <div class="row">

                                            <div class="col-lg-3">
                                                <div class="form-group">
                                                    <h6 style="font-size:11px; font-weight:600">Filter By</h6>
                                                    <select name="select" class="form-control js-choice"
                                                            id="filter_category">
                                                        <option value="1">-- Select Category --</option>
                                                        <option value="2">Account</option>
                                                        <option value="3">Project</option>
                                                        <option value="4">Sub Process</option>
                                                        <option value="5">Update Source</option>
                                                        <option value="6">Update Type</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-group">
                                                    <h6 style="font-size:11px; font-weight:600">Select Subcategory</h6>
                                                    <select name="select" class="form-control js-choice"
                                                            id="filter_subcategory">
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-lg-3 mt-1">
                                                <div class="form-group">
                                                    <h6 style="font-size:11px; font-weight:600">Pick Date Range</h6>
                                                    <input id="elixir_list_date_picker"
                                                           class="form-control mb-2 date-default"
                                                           type="text"
                                                           placeholder="Pick Date Range" autocomplete="off">
                                                </div>
                                            </div>

                                            <div class="col-lg-2 mt-4">
                                                <button type="button" class="btn btn-sm btn-success pl-5 pr-5"
                                                        id="btn_elixir_list_filter" onclick="elixir_list_filter()">Apply
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal: modalCart -->

                <!-- Modal: modalCart -->
                <div class="modal fade" id="up_val_change" tabindex="-1" role="dialog"
                     aria-labelledby="exampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-xl" style="max-width: 900px" role="document">
                        <div class="modal-content">
                            <!--Header-->
                            <div class="modal-header">
                                <div class="row ml-1 mr-1 pl-2 pr-3 pb-2"
                                     style="background-color: rgba(232, 234, 246 ,0.25); border-radius: .25rem; width : 100%"
                                     align="left">

                                    <div class="col-lg-12 mb-3">
                                        <div class="row mt-1" align="right">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true" content="right">×</span>
                                            </button>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-3 pl-4 pr-4 mt-1" align="left">
                                                <div class="row">
                                                    <h6 style="font-size:11px; font-weight:600">1. Select the updates
                                                        from the list</h6>
                                                </div>
                                            </div>

                                            <div class="col-lg-3 mt-1">
                                                <h6 style="font-size:11px; font-weight:600">2. Select new validity</h6>
                                                <input id="validity" class="form-control mb-2 date-time" type="text"
                                                       autocomplete="off"
                                                       placeholder="dd-mm-yyyy hh:mm">
                                            </div>

                                            <div class="col-lg-3 mt-1">
                                                <h6 style="font-size:11px; font-weight:600">3. Click on "Apply"</h6>
                                                <button class="btn btn-sm btn-primary" id="btn_change_val"
                                                        onclick="fn_update_validity()">
                                                  <span class="btn-text pl-2 pr-2">
                                                    Apply
                                                  </span>
                                                </button>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal: modalCart -->

                {% else %}

                <div class="row mb-2 mt-1">

                    <div class="col">
                        <h6 style="font-weight:600">**YOU ARE NOT AUTHORIZED TO ACCESS THIS WEB PAGE AS PER THE DOT
                            COMPLIANCE**</h6>
                    </div>

                </div>

                {% endif %}

            </div>
        </div>
    </div>
</div>

<!-- If you prefer jQuery these are the required scripts -->
<script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>

<script src="{% static 'js/vendor.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/timer.js' %}"></script>

<script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'js/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'js/buttons.flash.min.js' %}"></script>
<!--<script src="{% static 'js/jszip.min.js' %}"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="{% static 'js/pdfmake.min.js' %}"></script>
<script src="{% static 'js/vfs_fonts.js' %}"></script>
<script src="{% static 'js/buttons.html5.min.js' %}"></script>
<script src="{% static 'js/buttons.print.min.js' %}"></script>

<script>

    flatpickr(".date-time", {
        allowInput: true,
        enableTime: true,
        dateFormat: "d-m-Y H:i",
        minDate: "today",
    });

    $(document).ready(function () {
        $('#elixir_table_1').DataTable({
            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
            "order": [[ 2, "desc" ]],
            "sScrollX" : "100%",
            columnDefs: [
                {
                    "targets": [ 4 ],
                    "visible": false
                }
            ],
            dom: 'Blfrtip',
            buttons: [
                {
                    extend: 'pdf',
                    className: 'btn btn-sm btn-danger mt-2 ml-2'
                },
                {
                    extend: 'copy',
                    className: 'btn btn-sm btn-dark mt-2'
                },
                {
                    extend: 'csv',
                    className: 'btn btn-sm btn-secondary mt-2'
                },
                {
                    extend: 'excel',
                    className: 'btn btn-sm btn-primary mt-2'
                },
                {
                    extend: 'print',
                    className: 'btn btn-sm btn-info mt-2'
                }
        ]
        });
        $('#elixir_table_2').DataTable({
            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
            "order": [[ 0, "desc" ]],
            dom: 'Blfrtip',
            buttons: [
                {
                    extend: 'pdf',
                    className: 'btn btn-sm btn-danger mt-2 ml-2'
                },
                {
                    extend: 'copy',
                    className: 'btn btn-sm btn-dark mt-2'
                },
                {
                    extend: 'csv',
                    className: 'btn btn-sm btn-secondary mt-2'
                },
                {
                    extend: 'excel',
                    className: 'btn btn-sm btn-primary mt-2'
                },
                {
                    extend: 'print',
                    className: 'btn btn-sm btn-info mt-2'
                }
        ]
        });
    });

    flatpickr(".date-default", {
        allowInput: true,
        dateFormat: "d-m-Y",
        mode: "range",
        maxDate: "today",
    });

    function modal_open(id) {
        $('#loading').show();
        $.ajax({
            type: "POST",
            url: "{% url 'update_data' %}",
            data: {
                id: id,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            success: function (data) {
                $('#loading').hide();

                $('#elixir_table1_details_div').html('');
                $('#elixir_table1_details_div')
                .append('<span>' + "Recipients List" + '</span>' +
                            '<table class="table table-actions table-striped table-hover mb-0" id="elixir_table1_details" data-table>' +
                                '<thead>' +
                                    '<tr>' +
                                        '<th style="font-size:11px; font-weight:600">' + "#" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Emp_ID" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Emp_Name" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Emp_Email" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Ack_Time" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Acknowledgement" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Clarification" + '</th>' +
                                    '</tr>' +
                                '</thead>' +
                                '<tbody id="modal_users_table">' + '</tbody>' +
                            '</table>');

                up_data = data['update_details']
                up_usr_data = data['update_user_details']
                p_count = 0;
                $('#updateTitle').text(up_data[0].title)
                $('#updateTimestamp').text(up_data[0].timestamp)
                $('#updateCompletionRate').text(up_data[0].completion_rate + "%")

                for (var i = 0; i < up_usr_data.length; i++) {

                    if (up_usr_data[i].ack_status == "NA") {
                        p_count++;
                        $('#modal_users_table').append('<tr>' +
                            '<td>' + (i + 1) + '</td>' +
                            '<td>' + up_usr_data[i].emp_id + '</td>' +
                            '<td>' + up_usr_data[i].emp_name + '</td>' +
                            '<td>' + up_usr_data[i].user_email + '</td>' +
                            '<td>' + "-" + '</td>' +
                            '<td>' + "-" + '</td>' +
                            '<td>' + "-" + '</td>' +
                            '</tr>');
                    } else if (up_usr_data[i].ack_status == "yes") {
                        if(up_usr_data[i].ack_comment == "NA")
                        {
                            $('#modal_users_table').append('<tr>' +
                            '<td>' + (i + 1) + '</td>' +
                            '<td>' + up_usr_data[i].emp_id + '</td>' +
                            '<td>' + up_usr_data[i].emp_name + '</td>' +
                            '<td>' + up_usr_data[i].user_email + '</td>' +
                            '<td>' + up_usr_data[i].timestamp + '</td>' +
                            '<td>' + "YES (Understood)" + '</td>' +
                            '<td>' + "-" + '</td>' +
                            '</tr>');
                        }
                        else
                        {
                            $('#modal_users_table').append('<tr>' +
                            '<td>' + (i + 1) + '</td>' +
                            '<td>' + up_usr_data[i].emp_id + '</td>' +
                            '<td>' + up_usr_data[i].emp_name + '</td>' +
                            '<td>' + up_usr_data[i].user_email + '</td>' +
                            '<td>' + up_usr_data[i].timestamp + '</td>' +
                            '<td>' + "YES (Understood)" + '</td>' +
                            '<td>' + up_usr_data[i].ack_comment + '</td>' +
                            '</tr>');
                        }
                    } else if (up_usr_data[i].ack_status == "no") {
                        $('#modal_users_table').append('<tr>' +
                            '<td>' + (i + 1) + '</td>' +
                            '<td>' + up_usr_data[i].emp_id + '</td>' +
                            '<td>' + up_usr_data[i].emp_name + '</td>' +
                            '<td>' + up_usr_data[i].user_email + '</td>' +
                            '<td>' + up_usr_data[i].timestamp + '</td>' +
                            '<td>' + "YES (Needs Clarification)" + '</td>' +
                            '<td>' + up_usr_data[i].ack_comment + '</td>' +
                            '</tr>');
                    }
                }

                $('#t_users').text(up_usr_data.length);
                $('#p_users').text(p_count);
                $('#ack_users').text(up_usr_data.length - p_count);

                $('#elixir_table1_details').DataTable({
                    retrieve: true,
                    "searching": false,
                    "paging": false,
                    "ordering": false,
                    "info": false,
                    dom: 'Blfrtip',
                    buttons: [
                        {
                            extend: 'pdf',
                            className: 'btn btn-sm btn-danger mt-2 ml-2'
                        },
                        {
                            extend: 'copy',
                            className: 'btn btn-sm btn-dark mt-2'
                        },
                        {
                            extend: 'csv',
                            className: 'btn btn-sm btn-secondary mt-2'
                        },
                        {
                            extend: 'excel',
                            className: 'btn btn-sm btn-primary mt-2'
                        },
                        {
                            extend: 'print',
                            className: 'btn btn-sm btn-info mt-2'
                        }
                            ]
                });

            }
        });
    }

    function modal_poc_open(e) {
        usr_email = e.querySelector('td').innerText;
        $.ajax({
            type: "POST",
            url: "{% url 'update_poc_data' %}",
            data: {
                user_email: usr_email,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            success: function (data) {
                up_data = data['update_details']

                $('#elixir_table2_details_div').html('');
                $('#elixir_table2_details_div')
                .append('<span>' + "Updates List" + '</span>' +
                            '<table class="table table-actions table-striped table-hover mb-0" id="elixir_table2_details" data-table>' +
                                '<thead>' +
                                    '<tr>' +
                                        '<th style="font-size:11px; font-weight:600">' + "#" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Update_ID" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Title" + '</th>' +
                                        '<th style="font-size:11px; font-weight:600">' + "Completion_Rate" + '</th>' +
                                    '</tr>' +
                                '</thead>' +
                                '<tbody id="modal_poc_table">' + '</tbody>' +
                            '</table>');

                $('#user_email').text(data['poc_name'])
                $('#c_rate').text(data['completion_rate'] + "%")
                $('#ack_count').text(data['ack_count'])
                $('#pend_count').text(data['pend_count'])

                for (var i = 0; i < up_data.length; i++) {
                    $('#modal_poc_table').append('<tr>' +
                        '<td>' + (i + 1) + '</td>' +
                        '<td>' + up_data[i].id + '</td>' +
                        '<td>' + up_data[i].title + '</td>' +
                        '<td>' + up_data[i].completion_rate + "%" + '</td>' +
                        '</tr>');
                }

                $('#elixir_table2_details').DataTable({
                    retrieve: true,
                    "searching": false,
                    "paging": false,
                    "ordering": false,
                    "info": false,
                    dom: 'Blfrtip',
                    buttons: [
                        {
                            extend: 'pdf',
                            className: 'btn btn-sm btn-danger mt-2 ml-2'
                        },
                        {
                            extend: 'copy',
                            className: 'btn btn-sm btn-dark mt-2'
                        },
                        {
                            extend: 'csv',
                            className: 'btn btn-sm btn-secondary mt-2'
                        },
                        {
                            extend: 'excel',
                            className: 'btn btn-sm btn-primary mt-2'
                        },
                        {
                            extend: 'print',
                            className: 'btn btn-sm btn-info mt-2'
                        }
                                            ]
                });

            }

        });
    }

    $('#filter_category').change(function () {
            filter_category = $("#filter_category option:selected").text();

            if(filter_category == "-- Select Category --")
            {
                $('#filter_subcategory').html('');
            }
            else
            {
                $('#loading').show();
                $.ajax({
                    type: "POST",
                    url: "{% url 'elixir_sub_categories' %}",
                    data: {
                        category_name: filter_category,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    dataType: 'json',
                    success: function (data) {
                        $('#loading').hide();

                        $('#filter_subcategory').html('');
                        $('#filter_subcategory').append('<option value="0">' + "-- Select Subcategory --" + '</option>');
                        for (var i = 0; i < data['sub_category'].length; i++) {
                            $('#filter_subcategory').append($('<option>', {
                                value: i + 1,
                                text: data['sub_category'][i]
                            }));
                        }

                    }
                });
            }
    });

    function elixir_list_filter()
    {
        category    = $("#filter_category option:selected").text();
        subcategory = $("#filter_subcategory option:selected").text();
        date_range  = $('#elixir_list_date_picker').val();

        if(category == "-- Select Category --")
        {
            alert("Please select Category");
        }
        else
        {
            if(subcategory == "-- Select Subcategory --")
               {
                    alert("Please select Subcategory");
               }
            else
                {
                    if(date_range.length == 0)
                    {
                        start_date = "na";
                        end_date = "na";
                    }
                    else
                    {
                        start_date = date_range.substring(0, 10);
                        end_date = date_range.substring(14, 24);
                    }

                    $('#loading').show();
                    $.ajax({
                        type: "POST",
                        url: "{% url 'elixir_filtered_list' %}",
                        data: {
                            category_name: category,
                            subcategory_name: subcategory,
                            start_date: start_date,
                            end_date: end_date,
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                        },
                        dataType: 'json',
                        success: function (data) {
                            $('#loading').hide();

                            $('#elixir_table_1_div').html('');
                            $('#elixir_table_1_div')
                            .append('<table class="table table-actions table-striped table-hover mb-0" data-table id="elixir_table_1">'+
                                        '<thead>' +
                                            '<tr>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Selection" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Timestamp" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Id" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Title" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Message" +
                                                '</th>'+
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Update_Source" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Update_Type" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Sub_Process" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Sender" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Deadline" +
                                                '</th>' +
                                                '<th scope="col" style="font-size:11px; font-weight:600">' +
                                                    "Completion_Rate" +
                                                '</th>' +
                                                '<th scope="col" class="sorting_desc_disabled sorting_asc_disabled" style="font-size:11px; font-weight:600">' +
                                                '</th>' +
                                            '</tr>' +
                                        '</thead>' +
                                        '<tbody id="elixir_table_1_body">'+
                                        '</tbody>' +
                                    '</table>');

                            for(var i=0; i<data['update_details'].length; i++)
                                {
                                    $('#elixir_table_1_body')
                                    .append('<tr>'+
                                    '<td>' +
                                        '<label class="switch">' +
                                            '<input type="checkbox">' +
                                            '<span class="slider round">' + '</span>' +
                                        '</label>' +
                                    '</td>' +
                                    '<td>' + data['update_details'][i].timestamp        + '</td>' +
                                    '<td>' + data['update_details'][i].id               + '</td>' +
                                    '<td>' + data['update_details'][i].title            + '</td>' +
                                    '<td>' + data['update_details'][i].update_message   + '</td>' +
                                    '<td>' + data['update_details'][i].update_source    + '</td>' +
                                    '<td>' + data['update_details'][i].update_type      + '</td>' +
                                    '<td>' + data['update_details'][i].sub_process      + '</td>' +
                                    '<td>' + data['update_details'][i].sender           + '</td>' +
                                    '<td>' + data['update_details'][i].deadline         + '</td>' +
                                    '<td>' + data['update_details'][i].completion_rate  + "%"  + '</td>' +
                                    '<td>' +
                                        '<button type="button" data-toggle="modal" data-target="#update_details" class="btn btn-sm btn-info" onclick="modal_open('+ data['update_details'][i].id + ')">' +
                                            "Details" +
                                        '</button>' +
                                    '</td>'+
                                 '</tr>');
                                }

                            $('#elixir_table_1').DataTable({
                                "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                                "order": [[ 2, "desc" ]],
                                columnDefs: [
                                    {
                                        "targets": [ 4 ],
                                        "visible": false
                                    }
                                ],
                                dom: 'Blfrtip',
                                "sScrollX" : "100%",
                                buttons: [
                                    {
                                        extend: 'pdf',
                                        className: 'btn btn-sm btn-danger mt-2 ml-2'
                                    },
                                    {
                                        extend: 'copy',
                                        className: 'btn btn-sm btn-dark mt-2'
                                    },
                                    {
                                        extend: 'csv',
                                        className: 'btn btn-sm btn-secondary mt-2'
                                    },
                                    {
                                        extend: 'excel',
                                        className: 'btn btn-sm btn-primary mt-2'
                                    },
                                    {
                                        extend: 'print',
                                        className: 'btn btn-sm btn-info mt-2'
                                    }
                            ]
                            });

                        }
                    });
                }
        }
    }

    function hideLoader() {
        $('#loading').hide();
    }

    $(window).ready(hideLoader);

    function fn_update_validity()
    {

        $validity = $('#validity').val();

        updates_list = [];
        document.getElementById("elixir_table_1_body").querySelectorAll('tr').forEach((e) => {
            if(e.querySelectorAll('td')[0].querySelectorAll('input')[0].checked == true)
                {
                    updates_list.push(e.querySelectorAll('td')[2].innerHTML)
                }
        });

        if ($validity.length != 16) {
            alert('Please Select the New Validity Date & Time');
            return;
        } else if(updates_list.length == 0) {
            alert('Please Select atleast 1 Update');
            return;
        } else {
            $('#loading').show();
            $.ajax({
                type: "POST",
                url: "{% url 'change_update_validity' %}",
                data: {
                    updates_list: JSON.stringify(updates_list),
                    validity: $validity,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                dataType: 'json',
                success: function (data) {
                    $('#loading').hide();
                    alert(data['message']);
                    window.location = "";
                }
            });
        }

    }












</script>

</body>
</html>